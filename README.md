# Modelling Wildlife Corridors: Spatial Analysis of Landscape Barriers

**Student:** Lukas Buchmann  
**Supervisor:** Nils Ratnaweera  
**Institution:** ZHAW Institute of Computational Life Sciences (ICLS)  
**Course:** Project Work 2 (HS25)  
**Specialisation:** Digital Environment  

---

## ðŸ“Œ Project Overview

Habitat fragmentation caused by human infrastructure and land use change is a primary driver of biodiversity loss in Switzerland. This project focuses on the **Roe Deer (*Capreolus capreolus*)** in the **Canton of Schaffhausen**.

The project implements a reproducibility-focused workflow using **Python** and open-source geospatial libraries. It utilizes **OpenStreetMap (OSM)** combined with **Corine Land Cover (CLC)** to calculate resistance surfaces and perform Least-Cost Path (LCP) analysis to identify potential wildlife corridors and critical bottlenecks.

### Objectives
1.  **Resistance Surface Creation:** Combine OSM features (roads, buildings, fences) and Corine land-cover classifications to represent movement constraints based on ecological literature.
2.  **Least-Cost Path Analysis:** Compute cumulative costs to identify optimal corridors between core habitat patches.
3.  **Bottleneck Identification:** Locate key obstacles limiting ecological connectivity and validate them against independent risk models.

---

## ðŸ“‚ Repository Structure

This project adheres to the **FAIR Principles** (Findable, Accessible, Interoperable, Reusable).

```text
PA2-Modelling_Wildlife_Corridors/
â”‚
â”œâ”€â”€ data/                        # ALL data lives here
â”‚   â”œâ”€â”€ U2018_CLC2018_V2020_20u1.gpkg
â”‚   â”œâ”€â”€ Wildtierunfaelle_auf_Verkehrsinfrastruktur_SH.gpkg
â”‚   â”œâ”€â”€ baden-wuerttemberg-latest.osm.pbf
â”‚   |â”€â”€ switzerland-latest.osm.pbf
â”‚   â”œâ”€â”€ clc_resistance_costs.csv
â”‚   â””â”€â”€ osm_resistance_costs.csv
â”‚
â”œâ”€â”€ docs/                        # Quarto report
â”‚   â”œâ”€â”€ images/                  # Static images for the report
â”‚   â”œâ”€â”€ references.bib           # Bibliography file
â”‚   â”œâ”€â”€ index.qmd                # Main Quarto document
â”‚   â””â”€â”€ index.pdf                # Rendered report
â”‚
â”œâ”€â”€ results/                     # Final outputs generated by the pipeline
â”‚   â”œâ”€â”€ temp_files/              # Intermediate files
|   â”œâ”€â”€ clustered_bottlenecks.csv
â”‚   â”œâ”€â”€ final_corridor_traffic.tif
â”‚   â””â”€â”€ final_resistance_surface.tif
â”‚
â”œâ”€â”€ src/                         # Source code (Analysis scripts)
â”‚   â”œâ”€â”€ depriciated_code/        # Depriciated HPC Code
â”‚   â”œâ”€â”€ 01_resistance_surface_generation.py
â”‚   â”œâ”€â”€ 02_local_lcp_analysis.py
â”‚   â””â”€â”€ 03_extract_bottlenecks.py
â”‚
â”œâ”€â”€ .gitignore                   # Files to ignore in Git
â”œâ”€â”€ environment.yml              # Conda environment definition
â”œâ”€â”€ README.md                    # Project documentation/overview
â””â”€â”€ run_pipeline.py              # Orchestrator script (Entry Point)
```

---

## ðŸ› ï¸ Data Sources
This project utilizes the following open-source geospatial datasets:

* **[OpenStreetMap (OSM)](https://www.openstreetmap.org/):** (Primary Source) Retrieved via Geofabrik. Used for detailed infrastructure extraction (roads, railways, fences, waterways).
* **[Corine Land Cover (CLC)](https://land.copernicus.eu/en/products/corine-land-cover):** (Secondary Source) Used for broad-scale habitat classification and filling gaps where OSM land use data is sparse.

---

## âš™ï¸ Environment & Setup
This workflow is designed to run on any standard machine (Windows/Linux/Mac) using **Mamba** or **Conda**.

### Dependencies
The `environment.yml` defines a strict Python 3.10 geospatial stack to prevent dependency conflicts (e.g., NumPy 2.0 vs GDAL). Key libraries include:
* **GDAL / Rasterio:** Raster data manipulation.
* **GeoPandas / Shapely:** Vector data processing.
* **Scikit-image:** Least Cost Path (`MCP_Geometric`) analysis.
* **OSMnx / Pyrosm:** OSM data retrieval and parsing.

---

## ðŸš€ Usage
The entire analysis pipeline is orchestrated via a single Python script that handles environment checking and sequential execution.

### Prerequisites
* **Mamba** (recommended) or **Anaconda/Miniconda** installed.
* **Git** installed.

> **âš ï¸ Important Note for Windows Users:**
> Please execute these commands inside the **"Anaconda PowerShell Prompt"** (search for it in the Start Menu). Standard PowerShell or Command Prompt terminals may not detect the `conda` command by default.
>
> **macOS / Linux Users:** You can use your standard Terminal.

### Execution Steps

1. **Clone the Repository**
   ```bash
   git clone https://github.zhaw.ch/buchmluk/PA2-Modelling_Wildlife_Corridors.git
   cd PA2-Modelling_Wildlife_Corridors
   
2. **Run the Full Pipeline Execute the orchestrator. This script will automatically create/update the pa2_env environment and run all analysis steps in order.**
   ```bash
   python run_pipeline.py

Pipeline Stages
The run_pipeline.py script executes the following modules sequentially:

1. 01_resistance_surface_generation.py: Downloads OSM/CLC data, rasterizes vectors, and calculates the "Barrier Dominance" resistance surface.

2. 02_local_lcp_analysis.py: Identifies core habitat nodes and calculates all-to-all Least-Cost Paths to generate the corridor map.

3. 03_extract_bottlenecks.py: Intersects high-traffic corridors with high-resistance barriers to extract the top critical bottlenecks into a CSV file for the report.

---

## ðŸ“œ Reproducibility Statement
This project strictly follows the Statement of Reproducibility, Reusability, and Collaboration. The computational environment is defined as code (environment.yml), and the workflow is fully automated (run_pipeline.py) to ensure that identical results can be recreated from raw data without manual intervention.
